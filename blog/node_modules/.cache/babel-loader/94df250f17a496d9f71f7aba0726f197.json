{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.dot-all.js\";\nimport \"core-js/modules/es.regexp.sticky.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'ArticleAdd',\n  data: function data() {\n    return {\n      ruleForm: {\n        title: '',\n        des: '',\n        md: '',\n        cover: ''\n      },\n      imageUrl: ''\n    };\n  },\n  methods: {\n    submitForm: function submitForm() {\n      console.log(1);\n    },\n    //文件上传的检测\n    fileChange: function fileChange(file, fileList) {\n      if (file.status !== 'ready') return;\n\n      if (/^(.+)\\.md$/.test(file.name)) {\n        if (this.ruleForm.title) return;\n        this.ruleForm.title = RegExp.$1;\n      } else {\n        this.$message.error('只能上传md文件');\n        console.log('no');\n        fileList.pop();\n      }\n    },\n    beforeRemove: function beforeRemove() {\n      this.ruleForm.title = '';\n    },\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw);\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isJPG && isLt2M;\n    } // coverChange(file,fileList){\n    //     this.imageUrl = URL.createObjectURL(file.raw);\n    // }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;EACAA,kBADA;EAEAC,IAFA,kBAEA;IACA;MACAC;QACAC,SADA;QAEAC,OAFA;QAGAC,MAHA;QAIAC;MAJA,CADA;MAOAC;IAPA;EASA,CAZA;EAaAC;IACAC,UADA,wBACA;MACAC;IACA,CAHA;IAIA;IACAC,UALA,sBAKAC,IALA,EAKAC,QALA,EAKA;MACA;;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACAH;QACAG;MACA;IACA,CAfA;IAgBAC,YAhBA,0BAgBA;MACA;IACA,CAlBA;IAmBAC,mBAnBA,+BAmBAC,GAnBA,EAmBAJ,IAnBA,EAmBA;MACA;IACA,CArBA;IAsBAK,kBAtBA,8BAsBAL,IAtBA,EAsBA;MACA;MACA;;MAEA;QACA;MACA;;MACA;QACA;MACA;;MACA;IACA,CAjCA,CAkCA;IACA;IACA;;EApCA;AAbA","names":["name","data","ruleForm","title","des","md","cover","imageUrl","methods","submitForm","console","fileChange","file","fileList","beforeRemove","handleAvatarSuccess","res","beforeAvatarUpload"],"sourceRoot":"src/components/Admin","sources":["ArticleAdd.vue"],"sourcesContent":["<template>\r\n    <div id=\"ArticleAdd\">\r\n        <el-form \r\n        :model=\"ruleForm\"  \r\n        ref=\"ruleForm\" \r\n        >\r\n            <el-form-item label=\"标题\">\r\n                <el-input v-model=\"ruleForm.title\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"描述\">\r\n                <el-input v-model=\"ruleForm.des\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"内容\">\r\n                <el-upload\r\n                    class=\"upload-demo\"\r\n                    drag\r\n                    action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n                    :auto-upload=\"false\"\r\n                    :on-change=\"fileChange\"\r\n                    :limit=\"1\"\r\n                    :before-remove=\"beforeRemove\"\r\n                    >\r\n                        <i class=\"el-icon-upload\"></i>\r\n                        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n                </el-upload>\r\n            </el-form-item>\r\n            <el-form-item label=\"封面\">\r\n                <el-upload\r\n                    class=\"avatar-uploader\"\r\n                    action=\"http://localhost:4000/reg\"\r\n                    :show-file-list=\"false\"\r\n                    :on-success=\"handleAvatarSuccess\"\r\n                    :before-upload=\"beforeAvatarUpload\"\r\n                    :on-change=\"coverChange\"\r\n                    :auto-upload=\"false\"\r\n                    >\r\n                        <div v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n                            \r\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                </el-upload>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"submitForm\">提交</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'ArticleAdd',\r\n    data() {\r\n        return {\r\n            ruleForm: {\r\n                title: '',\r\n                des: '',\r\n                md: '',\r\n                cover: ''\r\n            },\r\n            imageUrl: ''\r\n        }\r\n    },\r\n    methods: {\r\n        submitForm() {\r\n            console.log(1)\r\n        },\r\n        //文件上传的检测\r\n        fileChange(file, fileList) {\r\n            if (file.status !== 'ready') return\r\n            if(/^(.+)\\.md$/.test(file.name)){\r\n                if(this.ruleForm.title) return\r\n                this.ruleForm.title = RegExp.$1\r\n            }else {\r\n                this.$message.error('只能上传md文件')\r\n                console.log('no')\r\n                fileList.pop()\r\n            }\r\n        },\r\n        beforeRemove(){\r\n            this.ruleForm.title = ''\r\n        },\r\n        handleAvatarSuccess(res, file) {\r\n            this.imageUrl = URL.createObjectURL(file.raw);\r\n        },\r\n        beforeAvatarUpload(file) {\r\n            const isJPG = file.type === 'image/jpeg';\r\n            const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n            if (!isJPG) {\r\n            this.$message.error('上传头像图片只能是 JPG 格式!');\r\n            }\r\n            if (!isLt2M) {\r\n            this.$message.error('上传头像图片大小不能超过 2MB!');\r\n            }\r\n            return isJPG && isLt2M;\r\n        },\r\n        // coverChange(file,fileList){\r\n        //     this.imageUrl = URL.createObjectURL(file.raw);\r\n        // }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#ArticleAdd {\r\n    /deep/.avatar-uploader .el-upload {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n    /deep/.avatar-uploader .el-upload:hover {\r\n        border-color: #409EFF;\r\n    }\r\n    /deep/.avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 178px;\r\n        height: 178px;\r\n        line-height: 178px;\r\n        text-align: center;\r\n    }\r\n    /deep/.avatar {\r\n        width: 178px;\r\n        height: 178px;\r\n        display: block;\r\n    }\r\n} \r\n</style>"]},"metadata":{},"sourceType":"module"}